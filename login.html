<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wie eet er mee?</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="./style.css" rel="stylesheet" />
    <link href="./response.css" rel="stylesheet" />
    <link href="./calendar.css" rel="stylesheet" />
  </head>
  <body>
    <div class="smoot-wrapper">
      <div class="smooth-content">
        <nav class="navbar" aria-label="Hoofdnavigatie">
          <div class="navbar_container">
            <a href="/" id="navbar_logo" aria-label=""></a>
            <div
              class="navbar_toggle"
              id="mobile-menu"
              aria-label="Mobiele navigatie openen/sluiten"
            >
              <span class="bar"></span>
              <span class="bar"></span>
              <span class="bar"></span>
            </div>
            <div onclick="logbtn()" class="account">
                <i class="bi bi-person-heart account"></i>
                <script>function logbtn(){ window.location.assign("/login.html"); }</script>
            </div>
            <ul class="navbar_menu">
                <li class="navbar_links">
                    <a class="row navbar_item" href="./index.html"><span class="label">home</span>
                        <span class="chev">></span></a>
                    </li>
                <li class="navbar_links">
                    <a class="row navbar_item" href="./huis.html"><span class="label">huishouden beheren</span>
                        <span class="chev">></span></a>
                    </li>
                <li class="navbar_links">
                    <a class="row navbar_item" href="./aanwezigheid.html"><span class="label">mijn aanwezigheid</span>
                        <span class="chev">></span></a>
                    </li>
                <li class="navbar_links">
                    <a class="row navbar_item" href="./account.html"><span class="label">mijn account</span>
                        <span class="chev">></span></a>
                    </li>
              </ul>
          </div>
        </nav>
        <div class="main">
          <div class="logo">
            <img src="./images/logo-off.png" onclick="homebtn()" id="logo" loading="lazy" height="80px" width="180px" alt="Samen sporten in een rustige privÃ© fitnessruimte">
            <script>function homebtn(){ window.location.assign("./index.html"); }</script>
          </div>
        </div>
        <div class="login_container">
          <form id="login-form">
            <label for="email">E-mail</label>
            <input class="field" id="email" name="email" type="email" required />
      
            <label for="password">Wachtwoord</label>
            <input class="field" id="password" name="password" type="password" required />
            </label>
      
            <button class="l-form-btn" type="submit">Log in</button>
            <div id="msg" role="status"></div>

          </form>
          <script>
            document.getElementById("login-form").addEventListener("submit", async (e) => {
              e.preventDefault();
              const f = new FormData(e.currentTarget);
              const payload = {
                email: f.get("email"),
                password: f.get("password"),
              };
              const res = await fetch("/api/login", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                credentials: "include",
                body: JSON.stringify(payload)
              });
              const data = await res.json();
              if (!res.ok) {
                document.getElementById("msg").textContent = data.error || "Login failed";
                return;
              }
              // Send user to their home page
              location.assign(data.user.homePath || "/");
            });
          </script>

        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollSmoother.min.js"></script>

    <script src="./app.js"></script>
  </body>
</html>
